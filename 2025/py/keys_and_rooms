

def keys_and_rooms(room):
    n = len(room)
    visited = set()
    
    def dfs(i):
        if i in visited:
            return
        visited.add(i)
        for key in room[i]:
            dfs(key)
            
    dfs(0)
    return len(visited) == n
    
    
    
rooms1 = [[1],[2],[3],[]]
print("rooms1 =", keys_and_rooms(rooms1))

rooms2 = [[1,3],[3,0,1],[2],[0]]
print("rooms2 =", keys_and_rooms(rooms2))